<div class="otp-wrapper">
  <!-- Back Button -->
  <mat-icon (click)="goBack()">⬅️</mat-icon>

  <!-- Illustration Side -->
  <div class="illustration-side">
    <div class="overlay">
      <h1 class="headline">Verify Your Email</h1>
      <p class="subtext">
        We've sent a verification code to your email address. Please enter the code below to complete your registration.
      </p>
    </div>
  </div>

  <!-- Form Side -->
  <div class="form-side">
    <mat-card class="otp-card">
      <mat-card-title>Email Verification</mat-card-title>
      <mat-card-subtitle>
        Enter the 6-digit code sent to {{ email }}
      </mat-card-subtitle>

      <form [formGroup]="otpForm" (ngSubmit)="verifyOtp()">
        
        <!-- OTP Input -->
        <mat-form-field appearance="fill" class="full-width otp-field">
          <mat-label>Verification Code</mat-label>
          <input 
            matInput 
            type="text" 
            formControlName="otpCode" 
            required 
            maxlength="6"
            placeholder="Enter 6-digit code"
            class="otp-input"
          />
          <mat-error *ngIf="otpForm.get('otpCode')?.hasError('required')">
            Verification code is required
          </mat-error>
          <mat-error *ngIf="otpForm.get('otpCode')?.hasError('pattern')">
            Please enter a valid 6-digit code
          </mat-error>
        </mat-form-field>

        <!-- Expiry Info -->
        <div class="expiry-info" *ngIf="expiresInMinutes > 0">
          <p>Code expires in {{ expiresInMinutes }} minutes</p>
        </div>

        <!-- Action Buttons -->
        <div class="btn-container">
          <button
            mat-raised-button
            color="primary"
            type="submit"
            [disabled]="otpForm.invalid || isVerifying"
            class="verify-btn"
          >
            <mat-spinner *ngIf="isVerifying" diameter="20"></mat-spinner>
            {{ isVerifying ? 'Verifying...' : 'Verify & Register' }}
          </button>

          <button
            mat-stroked-button
            type="button"
            (click)="sendOtp()"
            [disabled]="isLoading"
            class="resend-btn"
          >
            <mat-spinner *ngIf="isLoading" diameter="20"></mat-spinner>
            {{ isLoading ? 'Sending...' : 'Resend Code' }}
          </button>
        </div>

      </form>
    </mat-card>
  </div>
</div>
