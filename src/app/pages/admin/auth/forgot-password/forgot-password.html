<div class="forgot-password-wrapper">
  <!-- Left Side - Branding -->
  <div class="branding-side">
    <div class="overlay">
      <div class="logo-container">
        <mat-icon>lock_reset</mat-icon>
        <h1>Password Reset</h1>
      </div>
      <p class="tagline">Don't worry, it happens to the best of us!</p>
      <p class="subtitle">We'll help you get back into your account</p>
    </div>
  </div>

  <!-- Right Side - Form -->
  <div class="form-side">
    <mat-card class="forgot-password-card">
      <!-- Back to Login -->
      <button mat-icon-button class="back-btn" (click)="goToLogin()">
        <mat-icon>arrow_back</mat-icon>
      </button>

      <mat-card-header>
        <mat-card-title>Forgot Password?</mat-card-title>
        <mat-card-subtitle *ngIf="!emailSent">
          Enter your email address and we'll send you a link to reset your password
        </mat-card-subtitle>
        <mat-card-subtitle *ngIf="emailSent" class="success-message">
          Check your email for the password reset link
        </mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <!-- Form (shown when email not sent) -->
        <form *ngIf="!emailSent" [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()">
          <!-- Email Field -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Email Address</mat-label>
            <input 
              matInput 
              type="email" 
              formControlName="email" 
              placeholder="admin@example.com"
              required
            />
            <mat-icon matPrefix>email</mat-icon>
            <mat-error *ngIf="forgotPasswordForm.get('email')?.hasError('required')">
              Email is required
            </mat-error>
            <mat-error *ngIf="forgotPasswordForm.get('email')?.hasError('email')">
              Please enter a valid email
            </mat-error>
          </mat-form-field>

          <!-- Submit Button -->
          <button
            mat-raised-button
            color="primary"
            type="submit"
            class="submit-btn"
            [disabled]="forgotPasswordForm.invalid || isLoading"
          >
            <mat-spinner *ngIf="isLoading" diameter="20"></mat-spinner>
            <span *ngIf="!isLoading">Send Reset Link</span>
            <span *ngIf="isLoading">Sending...</span>
          </button>

          <!-- Back to Login Link -->
          <div class="back-to-login">
            <span>Remember your password? </span>
            <a (click)="goToLogin()">Sign In</a>
          </div>
        </form>

        <!-- Success Message (shown after email sent) -->
        <div *ngIf="emailSent" class="success-container">
          <div class="success-icon">
            <mat-icon>mark_email_read</mat-icon>
          </div>
          <p class="success-text">
            We've sent a password reset link to <strong>{{ forgotPasswordForm.get('email')?.value }}</strong>
          </p>
          <p class="info-text">
            Please check your email and click on the link to reset your password. 
            The link will expire in 24 hours.
          </p>

          <div class="action-buttons">
            <button mat-raised-button color="primary" (click)="goToLogin()">
              Back to Login
            </button>
            <button mat-stroked-button (click)="resendEmail()">
              Resend Email
            </button>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>

