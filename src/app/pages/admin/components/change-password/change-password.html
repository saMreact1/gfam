<div class="change-password-container">
  <div class="change-password-header">
    <h1>Change Password</h1>
    <p class="subtitle">Update your account password</p>
  </div>

  <mat-card class="change-password-card">
    <mat-card-content>
      <!-- Info Box -->
      <div class="info-box">
        <mat-icon>info</mat-icon>
        <div class="info-content">
          <p><strong>Password Requirements:</strong></p>
          <ul>
            <li>New password must be at least 8 characters long</li>
            <li>Make sure to remember your new password</li>
            <li>You will be logged out after changing your password</li>
          </ul>
        </div>
      </div>

      <form [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()">
        <!-- Current Password -->
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Current Password</mat-label>
          <input 
            matInput 
            [type]="hideCurrentPassword ? 'password' : 'text'"
            formControlName="currentPassword"
            placeholder="Enter your current password"
            autocomplete="current-password">
          <button 
            mat-icon-button 
            matSuffix 
            type="button"
            (click)="hideCurrentPassword = !hideCurrentPassword"
            [attr.aria-label]="'Hide password'" 
            [attr.aria-pressed]="hideCurrentPassword">
            <mat-icon>{{hideCurrentPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button>
          <mat-error *ngIf="changePasswordForm.get('currentPassword')?.invalid">
            {{ getErrorMessage('currentPassword') }}
          </mat-error>
        </mat-form-field>

        <!-- New Password -->
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>New Password</mat-label>
          <input 
            matInput 
            [type]="hideNewPassword ? 'password' : 'text'"
            formControlName="newPassword"
            placeholder="Enter your new password"
            autocomplete="new-password">
          <button 
            mat-icon-button 
            matSuffix 
            type="button"
            (click)="hideNewPassword = !hideNewPassword"
            [attr.aria-label]="'Hide password'" 
            [attr.aria-pressed]="hideNewPassword">
            <mat-icon>{{hideNewPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button>
          <mat-error *ngIf="changePasswordForm.get('newPassword')?.invalid">
            {{ getErrorMessage('newPassword') }}
          </mat-error>
        </mat-form-field>

        <!-- Confirm New Password -->
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Confirm New Password</mat-label>
          <input 
            matInput 
            [type]="hideConfirmPassword ? 'password' : 'text'"
            formControlName="confirmPassword"
            placeholder="Re-enter your new password"
            autocomplete="new-password">
          <button 
            mat-icon-button 
            matSuffix 
            type="button"
            (click)="hideConfirmPassword = !hideConfirmPassword"
            [attr.aria-label]="'Hide password'" 
            [attr.aria-pressed]="hideConfirmPassword">
            <mat-icon>{{hideConfirmPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button>
          <mat-error *ngIf="changePasswordForm.get('confirmPassword')?.invalid">
            {{ getErrorMessage('confirmPassword') }}
          </mat-error>
        </mat-form-field>

        <!-- Action Buttons -->
        <div class="button-group">
          <button 
            mat-raised-button 
            color="primary" 
            type="submit"
            [disabled]="isLoading || changePasswordForm.invalid"
            class="submit-btn">
            <mat-icon *ngIf="!isLoading">lock_reset</mat-icon>
            <mat-icon *ngIf="isLoading" class="spinner">refresh</mat-icon>
            {{ isLoading ? 'Changing Password...' : 'Change Password' }}
          </button>

          <button 
            mat-stroked-button 
            type="button"
            routerLink="/admin"
            [disabled]="isLoading"
            class="cancel-btn">
            <mat-icon>cancel</mat-icon>
            Cancel
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>

